// env.gradle
import org.apache.tools.ant.filters.ReplaceTokens

def envFile = file("${rootDir}/.env")
def props = new Properties()
if (envFile.exists()) {
    envFile.withReader('UTF-8') { reader ->
        props.load(reader)
    }
}

// 모든 프로젝트에 환경변수 적용
allprojects {
    ext.env = props

    processResources {
        filesMatching('**/application*.yaml') {
            filter(ReplaceTokens, tokens: props)
        }
    }
}
